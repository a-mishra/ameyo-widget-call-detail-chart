(this["webpackJsonpcall-summary-dashboard-app"]=this["webpackJsonpcall-summary-dashboard-app"]||[]).push([[0],{36:function(n,e,t){n.exports=t(49)},41:function(n,e,t){},49:function(n,e,t){"use strict";t.r(e);var a=t(0),o=t.n(a),l=t(4),i=t.n(l),r=t(22),c=t(6),u=(t(41),t(7)),s=t(76),d=t(33),p=t.n(d),m=t(77),g=t(72);function f(){var n=Object(c.a)(["\n    font-size: 10px;\n    font-weignt: 100;\n    text-align: left;\n    font-style: italic;\n    padding: 8px auto;\n    margin: 0px 0px;\n    line-height: 12px;\n    color: #666666;\n"]);return f=function(){return n},n}function C(){var n=Object(c.a)(["\n    float:right;\n    height:24px;\n    width:24px;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n"]);return C=function(){return n},n}var b=Object(g.a)((function(n){return{popover:{pointerEvents:"none"},paper:{padding:n.spacing(1),maxWidth:"75%"}}})),h=u.a.div(C()),v=u.a.span(f());function x(n){var e=b(),t=o.a.useState(null),a=Object(r.a)(t,2),l=a[0],i=a[1],c=function(){i(null)},u=Boolean(l);return o.a.createElement("div",null,o.a.createElement(h,{onMouseEnter:function(n){i(n.currentTarget)},onMouseLeave:c},o.a.createElement(p.a,{style:{height:"16px",width:"16px"}})),o.a.createElement(m.a,{id:"mouse-over-popover",className:e.popover,classes:{paper:e.paper},open:u,anchorEl:l,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},onClose:c,disableRestoreFocus:!0},o.a.createElement(v,null,n.message)))}function A(){var n=Object(c.a)(["\n    width: 100%;\n    height: calc( 100% - 36px );\n    display: grid;\n    align-items: center;\n\n    p {\n        display: block;\n        margin: 0px;\n        text-align: center;\n        font-weight: 800;\n        // font-size: 24px;\n        font-size: 18px;\n    }\n\n"]);return A=function(){return n},n}function w(){var n=Object(c.a)(["\n    padding: 8px 16px;\n    background-color: #666666;\n    color: #ffffff;\n    border-radius: 4px 4px 0 0;\n\n    p {\n        display: block;\n        margin: 0px;\n        text-align: start;\n        font-weight: 600;\n        font-size: 12px;\n    };\n\n"]);return w=function(){return n},n}function T(){var n=Object(c.a)(["\n    background: #fff;\n    // border: 1px solid #ccc;\n    overflow: hidden;\n    border-radius: 4px;\n    width: 100%;\n    height: 100%;\n    box-sizing: border-box;\n"]);return T=function(){return n},n}function y(){var n=Object(c.a)(["\n    background: #fff;\n    position: absolute;\n    top: 0px;\n    bottom: 0px;\n    left:0px;\n    right: 0px;\n"]);return y=function(){return n},n}var E=u.a.div(y()),O=u.a.div(T()),D=u.a.div(w()),S=u.a.div(A());var I=function(n){return o.a.createElement(E,null,o.a.createElement(O,null,o.a.createElement(D,null,o.a.createElement(s.a,{container:!0,direction:"row",alignItems:"center",justify:"center",spacing:2},o.a.createElement(s.a,{item:!0,xs:10},o.a.createElement("p",null,n.title)),o.a.createElement(s.a,{item:!0,xs:2},o.a.createElement(x,{message:n.info})))),o.a.createElement(S,null,n.data)))},j=t(10),k=t.n(j),q=t(24),M=t(25),F=t.n(M);function R(n){return W.apply(this,arguments)}function W(){return(W=Object(q.a)(k.a.mark((function n(e){var t,a,o,l,i,r,c,u,s;return k.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=null,n.next=3,L().then((function(n){t=n}));case 3:if(console.log("QueueCallSummary Data for observing Camapaign"),console.log(t),null!=t){n.next=10;break}return e(null),n.abrupt("return",null);case 10:return a=void 0==t.campaign.callCount?null:t.campaign.callCount,o=void 0==t.campaign.callAnsweredCount?null:t.campaign.callAnsweredCount,l=a?o/a*100:o?null:100,i=F()().format("YYYY-MM-DD HH:mm:ss"),r=F()(t.campaign.statsTime).format("YYYY-MM-DD HH:mm:ss"),c=void 0==t.campaign.inboundAnsweredCount?null:t.campaign.inboundAnsweredCount,u=void 0==t.campaign.ivrFailedCount?null:t.campaign.ivrFailedCount,s=void 0==t.campaign.inboundAbandonedCount?null:t.campaign.inboundAbandonedCount,e({totalOfferedCalls:a,totalAnsweredCalls:o,successRate:l,totalConnectedCalls:c,totalAbandonedAtIVR:u,totalAbandonedAtACD:s,dataFetchTime:i,dataCalculateTime:r}),n.abrupt("return",{totalOfferedCalls:a,totalAnsweredCalls:o,successRate:l,totalConnectedCalls:c,totalAbandonedAtIVR:u,totalAbandonedAtACD:s,dataFetchTime:i,dataCalculateTime:r});case 20:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function L(){return N.apply(this,arguments)}function N(){return(N=Object(q.a)(k.a.mark((function n(){var e,t;return k.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e=window.AmeyoClient.init(),t={queue:{},campaign:{}},n.next=4,e.globalData.get("currentManagingOrMonitoringCampaign").then(function(){var n=Object(q.a)(k.a.mark((function n(e){var a,o,l,i,r;return k.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("DashboardApp: Current Monitoring Campaign"),console.log(e),a=void 0==e.campaignId?0:e.campaignId,o=window.AmeyoClient.init(),l=window.getStatsName().queue,i=JSON.stringify({statsName:l}),r={url:"ameyorestapi/stats/getAllStats",headers:{"content-type":"application/json"},method:"POST",body:i},n.prev=7,n.next=10,o.httpRequest.invokeAmeyo(r).then((function(n){if(console.log("responseData || ".concat(l," : "),n),200===n.statusCode){var e=JSON.parse(n.response);console.log(e),e&&e.length>0&&(e=e[e.length-1].statsArr,t.queue=z(e,a)),console.log("selectedCampaignCallDataObj.queue "),console.log(t.queue)}}));case 10:n.next=16;break;case 12:return n.prev=12,n.t0=n.catch(7),console.log("DashboardApp: Could not fetch queueCall Stats",n.t0),n.abrupt("return",null);case 16:return l=window.getStatsName().campaign,i=JSON.stringify({statsName:l}),r={url:"ameyorestapi/stats/getAllStats?ts=".concat(F()().unix()),headers:{"content-type":"application/json"},method:"POST",body:i},n.prev=19,n.next=22,o.httpRequest.invokeAmeyo(r).then((function(n){if(console.log("responseData || ".concat(l," : "),n),200===n.statusCode){var e=JSON.parse(n.response);console.log(e),e&&e.length>0&&(e=e[e.length-1].statsArr,t.campaign=V(e,a)),console.log("selectedCampaignCallDataObj.campaign"),console.log(t.campaign)}}));case 22:n.next=28;break;case 24:return n.prev=24,n.t1=n.catch(19),console.log("DashboardApp: Could not fetch CampaignCallStats Stats",n.t1),n.abrupt("return",null);case 28:case"end":return n.stop()}}),n,null,[[7,12],[19,24]])})));return function(e){return n.apply(this,arguments)}}()).catch((function(n){return console.log(n),B("DashboardApp: Could not get current monitoring campaign"),null}));case 4:return n.abrupt("return",t);case 5:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function z(n,e){var t={},a=n.length,o=0,l=0,i=0,r=0,c=0,u=0,s=0,d=0;if(0!=a)for(var p=0;p<a;p++){if(e==n[p].campaign_id){var m=n[p];break}}if(m){d=m.statsTime;var g=m.statsArr,f=g.length,C=[];if(f>0)for(var b=0;b<f;b++){o+=g[b].queueCampaignCallCount,l+=g[b].queueCampaignCallAnsweredCount,i+=g[b].queueCampaignCallAbandonedCount,r+=g[b].queueCampaignCallWaitTimeLT20Count,c+=g[b].queueCampaignCallWaitTimeTotal,u+=g[b].queueCampaignCallConnectionTimeLT30Count,s+=g[b].queueCallInboundMissedGT30Count,C.push(g[b].queueCampaignCallWaitTimeMax);var h=null==g[b].queueCampaignCallWaitTimeMax||void 0==g[b].queueCampaignCallWaitTimeMax?0:g[b].queueCampaignCallWaitTimeMax;C.push(h)}}return t.callCount=o,t.callAnsweredCount=l,t.callAbandonedCount=i,t.callWaitTimeLT20Count=r,t.callWaitTimeTotal=c,t.callWaitTimeMax=Math.max.apply(null,C),t.callConnectionTimeLT30Count=u,t.callInboundMissedGT30Count=s,t.campaign_id=e,t.statsTime=d,t}function V(n,e){var t={},a=n.length,o=0,l=0,i=0,r=0,c=0,u=0,s=0,d=0,p=0,m=0;if(0!=a)for(var g=0;g<a;g++){if(e==n[g].campaign_id){var f=n[g];break}}return f&&(o=f.campaignCallCount,l=f.campaignCallAnsweredCount,i=f.campaignCallAbandonedCount,r=f.campaignCallWaitTimeLT20Count,c=f.campaignCallWaitTimeTotal,u=f.campaignCallConnectionTimeLT30Count,s=f.campaignCallInboundAnsweredCount,d=f.campaignCallInboundAbandonedCount,p=f.campaignIVRLT1FailedCallCount,m=f.statsTime),t.callCount=o,t.callAnsweredCount=l,t.callAbandonedCount=i,t.callWaitTimeLT20Count=r,t.callWaitTimeTotal=c,t.callConnectionTimeLT30Count=u,t.inboundAnsweredCount=s,t.inboundAbandonedCount=d,t.ivrFailedCount=p,t.campaign_id=e,t.statsTime=m,console.log(t),t}function B(n){var e={type:"error",content:n};window.AmeyoClient.init().interface.trigger("toastNotification",e)}var Y=t(34),H=t.n(Y);var J=function(n){Object(a.useEffect)((function(){var t=[{name:"Connected",y:n.connected},{name:"Abandoned at IVR",y:n.abandonedIVR},{name:"Abandoned at ACD",y:n.abandonedACD}];return e(t,n.offered),function(){}}),[n.connected,n.abandonedIVR,n.abandonedACD,n.offered]);var e=function(n,e){H.a.chart("callStatsChart",{chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie",height:.9*window.innerHeight},title:{text:null},tooltip:{pointFormat:"{point.y} | (<b>{point.percentage:.1f}%</b>)"},accessibility:{point:{valueSuffix:"%"}},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",colors:["#3597D3","#FBCB43","#E64535"],dataLabels:{enabled:!0,format:"<b>{point.name}</b> <br/>  {point.y}  ({point.percentage:.1f} %)"},showInLegend:!0}},legend:{align:"right",verticalAlign:"top",layout:"vertical",x:0,y:0,itemStyle:{textShadow:"none"},itemHoverStyle:{textShadow:"#FC0 1px 0 10px",fontSize:"14px"},labelFormatter:function(){return this.name},textOverflow:"ellipsis",itemMarginBottom:10},series:[{name:"Brands",colorByPoint:!0,innerSize:"50%",data:n}]})};return o.a.createElement("div",null,o.a.createElement("div",{id:"callStatsChart"}))};function P(){var n=Object(c.a)(["\n    position: absolute;\n    bottom: 0;\n    right: 0;\n    width: 150px;\n    height: 50px;\n    z-index: 999999;\n    background: #fff;\n"]);return P=function(){return n},n}var _=u.a.div(P());function G(){var n=Object(a.useState)(null),e=Object(r.a)(n,2),t=e[0],l=e[1];return Object(a.useEffect)((function(){function n(n){l(n)}R(n);var e=setInterval((function(){R(n)}),window.getWidgetDataRefreshInterval());return function(){clearInterval(e)}}),[]),null==t?o.a.createElement("div",{className:"App"},o.a.createElement(I,{title:"Inbound Call Summary",info:o.a.createElement(o.a.Fragment,null,o.a.createElement("div",null,"Distribution of the calls recieved in campaign ie abandoned at IVR, abandoned at ACD or connected to Agent."),o.a.createElement("div",null,o.a.createElement("b",null,"Data Calculate Time"),": Loading..."),o.a.createElement("div",null,o.a.createElement("b",null,"Data Fetch Time"),": Loading...")),data:o.a.createElement("p",null,"Loading...")})):o.a.createElement("div",{className:"App"},o.a.createElement(I,{title:"Inbound Call Summary",info:o.a.createElement(o.a.Fragment,null,o.a.createElement("div",null,"Distribution of the calls recieved in campaign ie abandoned at IVR, abandoned at ACD or connected to Agent."),o.a.createElement("div",null,o.a.createElement("b",null,"Data Calculate Time"),": ",t.dataCalculateTime),o.a.createElement("div",null,o.a.createElement("b",null,"Data Fetch Time"),": ",t.dataFetchTime)),data:o.a.createElement(o.a.Fragment,null,o.a.createElement(J,{offered:t.totalOfferedCalls,connected:t.totalConnectedCalls,abandonedIVR:t.totalAbandonedAtIVR,abandonedACD:t.totalAbandonedAtACD}),o.a.createElement(_,null))}))}var Q=document.getElementById("root");i.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(G,null)),Q)}},[[36,1,2]]]);